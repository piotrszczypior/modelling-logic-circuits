
rule RemoveDoubleNegations {
    from
        not_gate : CIRCUIT!LogicGate (
            (not_gate.type = #NOT and 
            not_gate.inputs->first().sourceGate.type = #NOT) or (
            	not_gate.type = #NOT and not_gate.output.targetGate.type = #NOT)
        )
    to 
}


rule BypassDoubleNegation {
    from
        conn : CIRCUIT!Connection (
            conn.targetGate.type = #NOT and
            conn.sourceGate.type = #NOT
        )
    to
        new_conn : CIRCUIT!Connection (
            name <- conn.name + '_bypassed',
            id <- conn.id + '_bypassed',
			
            sourceGate <- conn.sourceGate.inputs->first().sourceGate,
            sourceTerminal <- conn.sourceGate.inputs->first().sourceTerminal,
			
            targetGate <- conn.targetGate.output.targetGate,
            targetTerminal <- conn.targetGate.output.targetTerminal
        )
}